


\begin{theorem}[Ganzzahliger Fluss]\label{ift}

Falls alle Kapazitäten in $\mathcal{F}$ ganzzahlig sind, dann existiert auch ein maximaler Fluss, sodass der Fluss auf allen Kanten ganzzahlig ist.

\end{theorem}

\begin{theorem}[Max-Flow-Min-Cut]\label{mfmc}

TODO

\end{theorem}

\begin{theorem}

Falls das oben konstruierte Zwei-Fluss-Problem auf dem Graphen $\mathcal{N}_G$ eine nicht ganzzahlige Lösung zulässt, dann existiert auch mindestens eine ganzzahlige Lösung.

\end{theorem}

\begin{proof}
Angenommen, es existiert ein Graph $G$ wie oben, für den das zugehörige Zwei-Fluss-Problem auf $\mathcal{N}_G$ nur eine nicht ganzzahlige Lösung $\phi = (\phi_1,\phi_2)$ mit $|\phi_1| = |E_{int}| + 3|F_{int}|$ und $|\phi_2| = \sum_{f \in F_{int}}{(|f|-3)}$ zulässt.\\
Sei $E^*$ die Menge der äusseren Kanten in den Winkel-Dreiecken, die zumindest Teilweise Fluss 2 enthalten und $V^*$ die Menge aller Dummy-Knoten deren Kanten zu Senke 2 von $\phi_2$ mindestens teilweise saturiert sind. Jede Kante aus $E^*$ entlädt sich durch genau einen Knoten aus $V^*$. Es gilt somit
$$|E^*| \geq |V^*| \geq \sum_{f \in F_{int}}{(|f|-3)} = |\phi_2|$$ 
mit Gleichheit genau dann, wenn alle Kanten komplett saturiert sind. Wähle nun eine Teilmenge $\hat{E} \subseteq E^*$ wie folgt aus. Zuerst sei $\hat{E}$ die Menge aller Kanten aus $E^*$, die durch $\phi_2$ komplett saturiert sind. Betrachte nun die verbliebenen Kanten. Wir fügen solange jeweils maximal eine Kante hinzu, die zu einem der Knoten gehört, die noch keine passende Kante in $\hat{E}$ haben, bis $|\hat{E}| = |\phi_2|$ gilt.\\

Betrachte nun $\mathcal{N}_G\backslash \hat{E}$ als Fluss-Graphen nur mit Quelle 1 und Senke 1. Es kann keine ganzzahlige Lösung $\hat{\phi}_1$ mit $|\hat{\phi}_1| = |E_{int}| + 3|F_{int}|$ existieren, da wir sonst auch eine ganzzahlige Lösung für unser Problem gefunden hätten. Wir könnten $\hat{\phi}_2$ durch die Kanten aus $\hat{E}$ schicken und erhalten mit $\hat{\phi} = (\hat{\phi}_1,\hat{\phi}_2)$ einen ganzzahligen Fluss der unsere Bedingungen erfüllt. Da $\mathcal{N}_G\backslash \hat{E}$ aber ganzzahlige Kapazitäten hat muss es nach Theorem \ref{ift} auch eine maximale ganzzahlige Lösung $\tilde{\phi}_1$, mit $|\tilde{\phi}_1| \leq |E_{int}| + 3|F_{int}| - 1$, geben. Es existiert also nach Theorem \ref{mfmc} ein minimaler Kanten-Schnitt $\mathcal{S}$ in $\mathcal{N}_G\backslash \hat{E}$ mit 
$$|\mathcal{S}| = |\tilde{\phi}_1| \leq |E_{int}| + 3|F_{int}| - 1 < |\phi_1|.$$

Wie in Bemerkung \ref{outer_angle_sat} festgestellt müssen die äusseren Winkel-Kanten von jeder Lösung $\phi = (\phi_1,\phi_2)$ saturiert sein. Somit müssen in unserer Lösung auch mindestens $|\tilde{\phi}_1|$ der verbliebenen äusseren Winkel-Kanten saturiert sein. Angenommen es existiert eine 


Sei $\mathcal{S}$ so gewählt, dass sich alle äusseren Winkel-Kanten entweder in $\hat{E}$ oder in $\mathcal{S}$ befinden. 

Sei nun $\mathcal{F}$ eine Kopie von $\mathcal{N}_G$. Wir fügen eine übergeordnete Quelle und Senke und Kanten von der Quelle zu Quelle 1 und 2 und von Senke 1 und 2 hin zur neuen Senke mit Kapazitäten $|\phi_1|$ respektive $|\phi_2|$ hinzu. Eine maximaler Fluss $\varphi$ auf $\mathcal{F}$ kann nicht $|\phi_1| + |\phi_2|$ überschreiten. Insbesondere ist $ \hat{\varphi} = \phi_1 + \phi_2 $ dann ein maximaler, wenn auch nicht ganzzahliger, Fluss auf $\mathcal{F}$.\\

Sei $\mathcal{C} = \mathcal{S} \cup \hat{E}$, dann ist $\mathcal{C}$ ein Schnitt in $\mathcal{F}$ zwischen der neuen Quelle und Senke mit $$|\mathcal{C}| = |\mathcal{S} \cup \hat{E}| < \sum_{f \in F_{int}}{(|f|-3)} +  |E_{int}| + 3|F_{int}|  = |\phi_1| + |\phi_2|.$$ 
Nach Theorem \ref{mfmc} kann also kein Fluss auf $\mathcal{F}$ grösser als $|\phi_1| + |\phi_2| - 1$ sein. Somit kann auch $\phi_1 + \phi_2$ kein machbarer Fluss auf $\mathcal{F}$ sein. Dies gilt dann aber auch für $\phi = (\phi_1,\phi_2)$ auf $\mathcal{N}_G.$ Somit muss es zu jedem Graphen mit nicht ganzzahliger Lösung auch einen ganzzahligen Fluss geben.

\end{proof}